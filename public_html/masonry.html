<!DOCTYPE html>
<html>
<head>
	<title>Masonry test</title>
	<script src="js/libs/jquery/jquery.js"></script>
	<script src="js/libs/masonry.pkgd.min.js"></script>	
	<script src="https://unpkg.com/imagesloaded@4.1/imagesloaded.pkgd.min.js"></script>
</head>



<body>
<style type="text/css">
	.grid {
		width: 780px;
		border: 1px solid blue;
		margin: 0 auto;
		/*height: 850px;*/
	}
	.grid-item{
		/*float: left;*/
	}
	.reflow{
		position: absolute;
		top: 10px;
		left: 10px;
		padding: 10px 5px 10px 5px;
		color: #fff;
		background-color: #645BB8;
		border: none;
		font-weight: bold;
		border-radius: 10px;
	}

	.reflow:hover{
		cursor: pointer;
		background-color: #AE66BB;


	}

	.reflow::active{
		background-color: #000;
	}


</style>
<div class="grid">
  
</div>
<div>
	<button class="reflow">REFLOW</button>


</div>








<script type="text/javascript">
	$(window).load(function(){
		// console.log("ready");
		for (var i = 0; i <9; i++) {
			console.log("inside for loop");
			var string = "img/stock/file (" +(i+1)+ ").jpg";
			var height = Math.floor((Math.random() * 300) + 50);
			var width = Math.floor((Math.random() * 150) + 100);

			var string_size = 'style= "height:'+height+'px; ' + 'width: '+
			width+'px; "';
			console.log(string_size);
			// $('.grid').append('<img class="'+(i+1)+'" src="' +string+ '"' + string_size+ ' >');
			// $('.grid').append('<img class="grid-item '+(i+1)+'" src="' +string+ '">' );
			$('.grid').append('<div class="grid-item"><img class="'+(i+1)+'" src="' +string+ '"> </div>' );

			$('.' + (i+1)).css('height', height+'px');
			$('.' + (i+1)).css('width', 250+'px');
			
		};

		// $('.grid').append('<img src="' + + '" >');


		$('.grid').imagesLoaded(function(){
			console.log("masonry in action");
					$('.grid').masonry({
			  // set itemSelector so .grid-sizer is not used in layout
			  itemSelector: '.grid-item',
			  columnWidth : 260
			})			
		});



		$('.reflow').click(function(){
			reflow();
		});


		function reflow(){
			for (var i = 0; i <9; i++) {
				var height = Math.floor((Math.random() * 300) + 50); 
				$('.' + (i+1)).css('height', height+'px');		
			};		
			$('.grid').masonry({
			  // set itemSelector so .grid-sizer is not used in layout
			  itemSelector: '.grid-item',
			  columnWidth : 260
			})			


		}




	});
</script>

</body>
</html>